language: php

cache:
  directories:
    - $HOME/.composer/cache

php:
  - '7.3'
  - '7.4'

env:
  - LARAVEL=6.0
  - LARAVEL=6.18
  - LARAVEL=7.0
  - LARAVEL=7.28
  - LARAVEL=8.0
  - LARAVEL=8.6

script:
  - vendor/bin/phpunit

before_install:
  - MINOR=`echo $LARAVEL | sed 's/[6|7|8]\.\([0-9]\+\)/\1/'`
  - '[[ $LARAVEL =~ ^7\.[0-9]+$ ]] && MAJOR=7 || MAJOR=6'
  - '[[ $LARAVEL =~ ^8\.[0-9]+$ ]] && MAJOR=8 || true'
  - echo "Testing against Laravel ${MAJOR}.${MINOR}"
  - composer require "illuminate/support:${MAJOR}.${MINOR}.*" --no-update -v
  - composer require "illuminate/console:${MAJOR}.${MINOR}.*" --no-update -v

install: composer install --no-interaction

notifications:
  email: false
  slack:
    secure: "f5hspxpRVPPDshZOtaRtsHvzvo5iFnAYeMgPTVt8q/9kpGZ8ZjqPkeyEbCQ+sB5d+Z2GQRP1r+RcyCaFSEMyz42aKsMHdPXddA5EzNcIwRWeJ8yFHvOwRSv1JZUWsEIoMWD5XRWebBso/QpkqDPfEqgLW3IYiAQBWptgEW3slv3WQRe+WrVlPhRPgv/O2/XVjrgln/W1PBRkh9txOffPsZ26msc/t/L6fnlI8uVDJl7fqPJj6imLoBGrsm2eHhHmbNDM5R4542Ii0Bhu/s2brXfwPiMLkJEpTLdgCwr/SrJCSOgFu6MEqT+ZiO0vS/sFt8vbDjh2zl4/rtyCN4BtQ0+Tj+q7bw6HAzmaVD3ZnoS9yMuMaflj8bol/fnf6Q9S6Y1sdkWISMc86yN7ocbWkqz/4TJWevASVMuRHBkkyHhnMxul4GTEKaN+NDDQ2yGe0Q45NuNNpugEVku7d6rplCM0rKeS500WM/alBxj4WyFYcJ004ptznBkBgarDE6Xqs+7AWGDn4nCm8cwy7EDnBPiChohz4aTe/uwiygIpAoi9dupu0hh1Pdrl+ec/spgYArFJC6ej9T9v1kgt0pGFp58Zi/CKHjVORXQLOCyGZBa2s3z2RrIkSWblnpa31Qyfe2v/fzaWh1S7dRrJs2IxViHV+fw4cej79JwfnEHqHCI="
